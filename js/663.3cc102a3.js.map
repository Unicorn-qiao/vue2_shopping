{"version":3,"file":"js/663.3cc102a3.js","mappings":"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","sources":["webpack://shopping/./src/views/address/create.vue","webpack://shopping/src/views/address/create.vue","webpack://shopping/./src/views/address/create.vue?38ae","webpack://shopping/./src/views/address/create.vue?fb65"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"create\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":_vm.addressId ? `编辑收货地址`:`新增收获地址`,\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"收获地址\")]),_c('van-form',{ref:\"form\"},[_c('van-cell-group',{attrs:{\"inset\":\"\"}},[_c('van-field',{attrs:{\"label\":\"姓名\",\"placeholder\":\"请输入收货人姓名\",\"rules\":[{ required: true, message: '请输入姓名' }]},model:{value:(_vm.newaddress.name),callback:function ($$v) {_vm.$set(_vm.newaddress, \"name\", $$v)},expression:\"newaddress.name\"}}),_c('van-field',{attrs:{\"label\":\"电话\",\"maxlength\":\"11\",\"type\":\"tel\",\"placeholder\":\"请输入收货人手机号\",\"rules\":[\n            { required: true, message: '请输入手机号' },\n            { pattern: /^1[3-9]\\d{9}$/, message: '手机号格式不正确' }\n          ]},model:{value:(_vm.newaddress.phone),callback:function ($$v) {_vm.$set(_vm.newaddress, \"phone\", $$v)},expression:\"newaddress.phone\"}}),_c('van-field',{attrs:{\"label\":\"地区\",\"placeholder\":\"请选择省/市/区\",\"readonly\":\"\",\"is-link\":\"\"},on:{\"click\":function($event){_vm.showPicker = true}},model:{value:(_vm.address),callback:function ($$v) {_vm.address=$$v},expression:\"address\"}}),_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showPicker),callback:function ($$v) {_vm.showPicker=$$v},expression:\"showPicker\"}},[_c('van-picker',{attrs:{\"columns\":_vm.regionList,\"show-toolbar\":\"\",\"field-names\":{ text: 'text', value: 'value' }},on:{\"cancel\":function($event){_vm.showPicker = false},\"confirm\":_vm.onConfirm}})],1),_c('van-field',{attrs:{\"label\":\"详细地址\",\"placeholder\":\"街道门牌、楼层等信息\",\"rules\":[{ required: true, message: '请输入详细地址' }]},model:{value:(_vm.newaddress.detail),callback:function ($$v) {_vm.$set(_vm.newaddress, \"detail\", $$v)},expression:\"newaddress.detail\"}})],1)],1)],1),_c('div',{staticClass:\"save\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.add}},[_vm._v(\"保存\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"create\">\r\n    <van-nav-bar fixed :title=\"addressId ? `编辑收货地址`:`新增收获地址`\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\r\n    <div class=\"content\">\r\n      <div class=\"title\">收获地址</div>\r\n      <van-form ref=\"form\">\r\n        <van-cell-group inset>\r\n          <van-field\r\n            v-model=\"newaddress.name\"\r\n            label=\"姓名\"\r\n             placeholder=\"请输入收货人姓名\"\r\n            :rules=\"[{ required: true, message: '请输入姓名' }]\"\r\n          />\r\n          <van-field\r\n            v-model=\"newaddress.phone\"\r\n            label=\"电话\"\r\n            maxlength=\"11\"\r\n            type=\"tel\"\r\n            placeholder=\"请输入收货人手机号\"\r\n            :rules=\"[\r\n              { required: true, message: '请输入手机号' },\r\n              { pattern: /^1[3-9]\\d{9}$/, message: '手机号格式不正确' }\r\n            ]\"\r\n          />\r\n          <van-field\r\n            v-model=\"address\"\r\n            label=\"地区\"\r\n            placeholder=\"请选择省/市/区\"\r\n            readonly\r\n            is-link\r\n            @click=\"showPicker = true\"\r\n          />\r\n          <!-- 弹出层 -->\r\n          <van-popup v-model=\"showPicker\" round position=\"bottom\">\r\n            <van-picker\r\n              :columns=\"regionList\"\r\n              show-toolbar\r\n              :field-names=\"{ text: 'text', value: 'value' }\"\r\n              @cancel=\"showPicker = false\"\r\n              @confirm=\"onConfirm\"\r\n            />\r\n          </van-popup>\r\n          <van-field\r\n            v-model=\"newaddress.detail\"\r\n            label=\"详细地址\"\r\n            placeholder=\"街道门牌、楼层等信息\"\r\n            :rules=\"[{ required: true, message: '请输入详细地址' }]\"\r\n          />\r\n        </van-cell-group>\r\n      </van-form>\r\n    </div>\r\n\r\n    <div class=\"save\">\r\n      <div class=\"btn\" @click=\"add\">保存</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRegionAddress, getAddressDetail } from '@/api/address'\r\n\r\nexport default {\r\n  name: 'CreateAddress',\r\n  data () {\r\n    return {\r\n      newaddress: {\r\n        name: '',\r\n        phone: '',\r\n        region: [],\r\n        detail: ''\r\n      },\r\n      address: '',\r\n      showPicker: false,\r\n      regionList: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getRegion()\r\n    this.render(this.addressId)\r\n  },\r\n  computed: {\r\n    addressId () {\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  methods: {\r\n    async getRegion () {\r\n      const { data: { list } } = await getRegionAddress()\r\n      const listArray = Object.values(list)\r\n      this.regionList = listArray.map(province => ({\r\n        text: province.name,\r\n        value: province.id,\r\n        children: province.city\r\n          ? Object.values(province.city).map(city => ({\r\n            text: city.name,\r\n            value: city.id,\r\n            children: city.region\r\n              ? Object.values(city.region).map(region => ({\r\n                text: region.name,\r\n                value: region.id\r\n              }))\r\n              : []\r\n          }))\r\n          : []\r\n      }))\r\n    },\r\n    onConfirm (value, indexs) {\r\n      let list = this.regionList\r\n      const re = []\r\n      indexs.forEach((colIndex) => {\r\n        if (list && list[colIndex]) {\r\n          re.push({\r\n            label: list[colIndex].text,\r\n            value: list[colIndex].value\r\n          })\r\n          list = list[colIndex].children\r\n        }\r\n      })\r\n      this.newaddress.region = re\r\n      this.address = value.map(item => item).join(' ')\r\n      this.showPicker = false\r\n    },\r\n    add () {\r\n      if (Object.values(this.newaddress).some(value => !value || (Array.isArray(value) && value.length === 0))) {\r\n        return\r\n      }\r\n      if (!this.addressId) {\r\n        this.$store.dispatch('address/addNewAddress', this.newaddress)\r\n      } else {\r\n        this.$store.dispatch('address/editAdds', { addressId: this.addressId, newadds: this.newaddress })\r\n        this.$store.dispatch('address/setDefaultAdds', this.addressId)\r\n        this.$store.dispatch('address/getDefaultAdds')\r\n      }\r\n      this.$toast.success('地址保存成功')\r\n      this.$router.replace('/address')\r\n    },\r\n    async render (addressId) {\r\n      if (!addressId) return\r\n      const { data: { detail } } = await getAddressDetail(addressId)\r\n      this.newaddress.name = detail.name\r\n      this.newaddress.phone = detail.phone\r\n      this.newaddress.region = Object.entries(detail.region).map(([key, value]) => ({\r\n        text: value,\r\n        value: detail[`${key}_id`]\r\n      }))\r\n      this.address = Object.values(detail.region).map(item => item).join(' ')\r\n      this.newaddress.detail = detail.detail\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.create {\r\n  padding-top: 46px;\r\n  padding-bottom: 100px;\r\n  min-height: 100vh;\r\n  ::v-deep {\r\n    .van-nav-bar__arrow {\r\n      color: #333;\r\n    }\r\n  }\r\n}\r\n\r\n.content {\r\n  .title {\r\n    width: 94%;\r\n    padding: 15px 20px 0 20px;\r\n    font-size: 14px;\r\n    color: #989090;\r\n  }\r\n  .van-cell-group {\r\n    margin: 10px;\r\n    padding: 0 20px;\r\n    .van-cell {\r\n      margin: 10px 0;\r\n      padding: 10px 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n\r\n::v-deep .van-field__label {\r\n  width: 65px;\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n\r\n::v-deep .van-field__control {\r\n  color: #333 !important;\r\n}\r\n\r\n::v-deep .van-field__control::placeholder {\r\n  font-size: 14px;\r\n  color: #9f9a9a !important;\r\n}\r\n\r\n.save {\r\n  width: 100%;\r\n  background-color: #fff;\r\n  .btn {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    margin: 10px 20px;\r\n    text-align: center;\r\n    background: linear-gradient(90deg, #f9211c, #ff6335);\r\n    border-radius: 25px;\r\n    color: #fff;\r\n  }\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=543b49f3&scoped=true\"\nimport script from \"./create.vue?vue&type=script&lang=js\"\nexport * from \"./create.vue?vue&type=script&lang=js\"\nimport style0 from \"./create.vue?vue&type=style&index=0&id=543b49f3&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"543b49f3\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","addressId","on","$event","$router","go","_v","ref","required","message","model","value","newaddress","name","callback","$$v","$set","expression","pattern","phone","showPicker","address","regionList","text","onConfirm","detail","add","staticRenderFns","data","region","created","getRegion","computed","$route","params","id","methods","list","getRegionAddress","listArray","Object","values","map","province","children","city","indexs","re","forEach","colIndex","push","label","item","join","some","Array","isArray","length","$store","dispatch","newadds","$toast","success","replace","getAddressDetail","entries","key","component"],"sourceRoot":""}